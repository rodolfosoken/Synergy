<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">


<p:defaultCommand target="adicionar-fornecedor" scope="tabFornecedor" />
<h:panelGrid columns="4" style="margin-bottom:10px">

	<p:outputLabel value="Fornecedor: " for="pesquisaFornecedor" />
	<p:autoComplete id="pesquisaFornecedor" dropdown="true" size="50"
		completeMethod="#{cotacaoFerramentaBean.completarFornecedor}"
		var="fornecedor" itemLabel="#{fornecedor.nome}"
		itemValue="#{fornecedor}" forceSelection="true"
		converter="fornecedorConverter"
		value="#{cotacaoFerramentaBean.participanteFerramenta.fornecedor}">
	</p:autoComplete>

	<p:spacer width="100" height="10" />


	<p:commandButton id="adicionar-fornecedor" value="Adicionar"
		icon="ui-icon-plus"
		action="#{cotacaoFerramentaBean.adicionarFornecedor}"
		process="tabFornecedor"
		update="pesquisaFornecedor fornecedores-table :frm:messages" />


</h:panelGrid>

<p:commandButton id="remover-fornecedor" value="Remover"
	icon="ui-icon-minus" style="margin-bottom:10px"
	action="#{cotacaoFerramentaBean.removerFornecedor}" process="@this"
	update="tabView"
	disabled="#{cotacaoFerramentaBean.participanteSelecionado==null}" />
<p:outputLabel />

<p:dataTable
	value="#{cotacaoFerramentaBean.cotacaoFerramenta.participantesFerramentas}"
	var="participante" emptyMessage="Nenhum fornecedor adicionado."
	id="fornecedores-table"
	selection="#{cotacaoFerramentaBean.participanteSelecionado}"
	selectionMode="single" rowKey="#{participante.fornecedor.idfornecedor}">

	<!-- Quando selecionar disparar evento -->
	<p:ajax event="rowSelect" update=":frm:tabView" />
	<p:ajax event="rowUnselect" update=":frm:tabView" />

	<p:column headerText="ID" style="text-align: center; width: 60px">
		<h:outputText value="#{participante.fornecedor.idfornecedor}" />
	</p:column>

	<p:column headerText="CNPJ" style="text-align: center; width: 160px">
		<h:outputText value="#{participante.fornecedor.cnpj}" />
	</p:column>

	<p:column headerText="Nome da Empresa"
		style="text-align: center; width: 250px">
		<h:outputText value="#{participante.fornecedor.nome}" />
	</p:column>

	<p:column headerText="Contato" style="text-align: center; width: 100px">
		<h:outputText value="#{participante.fornecedor.contato}" />
	</p:column>

	<p:column headerText="Telefone"
		style="text-align: center; width: 100px">
		<h:outputText value="#{participante.fornecedor.telefone}" />
	</p:column>

	<p:column headerText="Link" style="text-align: center; width: 100px">
		<h:outputText value="#{participante.fornecedor.linkSharepoint}" />
	</p:column>


</p:dataTable>


</html>